<%= mapper_namespace %>.<%= javascript_name %> = function(obj) {
  if (!obj) {
    return null;
  }
<% properties.each do |name,prop| %><%= property_mapper_for name %>
<% end %>
var entity = <%= domain_namespace %>.<%= object_name %>.create({
<%= mapping_list %>
});

  if (obj.id) {
    <%= cache_module %>.set('<%= javascript_name %>', obj.id, entity);
  }
  return entity;
};